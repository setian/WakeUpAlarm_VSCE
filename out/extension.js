"use strict";var h=Object.create;var m=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var P=(e,n)=>{for(var o in n)m(e,o,{get:n[o],enumerable:!0})},f=(e,n,o,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of C(n))!U.call(e,s)&&s!==o&&m(e,s,{get:()=>n[s],enumerable:!(a=b(n,s))||a.enumerable});return e};var p=(e,n,o)=>(o=e!=null?h(x(e)):{},f(n||!e||!e.__esModule?m(o,"default",{value:e,enumerable:!0}):o,e)),S=e=>f(m({},"__esModule",{value:!0}),e);var M={};P(M,{activate:()=>y,deactivate:()=>k});module.exports=S(M);var t=p(require("vscode")),d=p(require("fs")),i;function y(e){console.log('"wakeup-alarm"\uC774 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4.');let n="",o=0;e.subscriptions.push(t.workspace.onDidChangeTextDocument(s=>{let l=t.workspace.getConfiguration("wakeupAlarm"),w=l.get("triggerCount",20),u=l.inspect("excludedKeys"),g;if(u?.globalValue===void 0&&u?.workspaceValue===void 0?g=["<delete>"]:g=l.get("excludedKeys",[]),s.contentChanges.length===0)return;let c=s.contentChanges[s.contentChanges.length-1],r=null;if(c.text.length===1&&!c.text.includes(`
`)?r=c.text:c.text===""&&c.rangeLength>0&&(r="<delete>"),!r||g.includes(r)){i&&i.webview.postMessage({command:"stopSound"}),o=0,n="";return}r!==n&&i&&i.webview.postMessage({command:"stopSound"}),r===n?o++:(n=r,o=1),o>=w&&(o=0,t.window.showWarningMessage("Are you falling asleep? Time for a stretch! \u{1F634}"),v(e))}));let a=t.commands.registerCommand("wakeupAlarm.testAlarm",()=>{t.window.showInformationMessage("Testing Wake Up Alarm!"),v(e)});e.subscriptions.push(a)}function v(e){let n=t.Uri.joinPath(e.extensionUri,"media"),o=t.Uri.joinPath(n,"alarm.mp3"),a=t.Uri.joinPath(n,"alarm.wav"),s=null;d.existsSync(o.fsPath)?s=o:d.existsSync(a.fsPath)&&(s=a);let l=t.Uri.joinPath(n,"pluto.png");if(d.existsSync(l.fsPath)||t.window.showErrorMessage("Image file not found in media folder: pluto.png"),!s){t.window.showErrorMessage("Sound file not found in media folder: alarm.mp3 or alarm.wav");return}i?i.reveal(t.ViewColumn.One):(i=t.window.createWebviewPanel("wakeupAlarm","Wake Up!",t.ViewColumn.One,{enableScripts:!0,localResourceRoots:[n]}),i.onDidDispose(()=>{i=void 0},null,e.subscriptions));let w=i.webview.asWebviewUri(s),u=i.webview.asWebviewUri(l);i.webview.html=A(e),i.webview.postMessage({command:"updateMedia",imageUri:u.toString(),soundUri:w.toString()})}function A(e){let n=t.Uri.joinPath(e.extensionUri,"media","webview.html");return d.readFileSync(n.fsPath,"utf8")}function k(){}0&&(module.exports={activate,deactivate});
